---
title: "node: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.28' not found"
emoji: "ğŸ¦”"
type: "tech"
topics:
  - "ubuntu"
  - "node"
  - "nvm"
published: true
published_at: "2023-04-29 08:44"
---

Ubuntu 18.04 ãªã©å¤ã„ OS ã§æœ€æ–°ã® node.js ã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨ `GLIBC_2.28' not found ãªã©ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚å¯¾å‡¦æ–¹æ³•ã‚’èª¬æ˜ã™ã‚‹ã€‚

## æ‰‹é †

```
apt update && apt install -y curl
export XDG_CONFIG_HOME=/work
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash
export NVM_DIR="$XDG_CONFIG_HOME/nvm"
. "$NVM_DIR/nvm.sh"
nvm install 17.9.1
npm install uglify-js -g
```

## æ¦‚ç•¥

node.js ã§ v20.0.0 ãªã©æœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨å¿…è¦ãª GLIBC ãŒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å´ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ãªã„ã“ã¨ãŒã‚ã‚‹ã€‚ã“ã®ãŸã‚ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å´ã§å¯¾å¿œã—ã¦ã„ã‚‹ node.js ã®å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

ãƒã‚¤ãƒ³ãƒˆã¯ `nvm install 17.9.1` ã§ã€å¯¾å¿œã—ã¦ã„ã‚‹ node.js ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

## èª¬æ˜

### nvm ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

https://www.linode.com/docs/guides/how-to-install-use-node-version-manager-nvm/ ã®ã‚µã‚¤ãƒˆã«è¨˜è¼‰ã®æ‰‹é †ã§ `nvm` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚(`v0.39.3` ã®éƒ¨åˆ†ã§æœ€æ–°ã®æƒ…å ±ã¯  https://github.com/nvm-sh/nvm#install--update-script å‚ç…§)

`nvm` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹éš›ã€æŒ‡å®šã—ãŸå ´æ‰€ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã€ `XDG_CONFIG_HOME` ã®å¤‰æ•°ã‚’äº‹å‰ã«å®šç¾©ã—ã¦ãŠãã€‚`XDG_CONFIG_HOME` ã®å¤‰æ•°ã‚’å®šç¾©ã—ãªã„å ´åˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å ´æ‰€ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚

```
export XDG_CONFIG_HOME=/work
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.2/install.sh | bash
```

### `nvm` ã‚’ä½¿ã£ã¦ node.js ã®æŒ‡å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

```
export NVM_DIR="$XDG_CONFIG_HOME/nvm"
. "$NVM_DIR/nvm.sh"
nvm install 17.9.1
```

`nvm install 17.9.1` ã®ä»£ã‚ã‚Šã« `nvm install node` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ node.js ã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã®ã§ GLIBC ã®ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèªã§ãã‚‹ã€‚


### node.js/npm ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèªç”¨ã« uglify-js ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

```
npm install uglify-js -g
```

### uglify-js ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª

```
which uglifyjs
```

## Dockerfile ã«ã—ãŸã‚‚ã®

https://github.com/m-tmatma/npm-install-test


## å‚è€ƒã‚µã‚¤ãƒˆ

https://www.linode.com/docs/guides/how-to-install-use-node-version-manager-nvm/
https://github.com/nvm-sh/nvm/blob/master/README.md#additional-notes
https://www.npmjs.com/package/uglify-js